## 什么是编译

## 编译系统的结构
1. 语义分析：通过分析源语言获得句子的语义
    1. 首先划分成分
        1. 词法分析
        2. 语法分析：在词法分析的基础上
        3. 语义分析：在语法分析的基础上
2. 中间表示(很重要)：起到桥梁的作用，独立于具体的语言，通过中间表示可以将其转换为任意语言，任意语言也可以转换为中间表示。
3. 编译器的结构
多个阶段在一起，语义结果通常直接表示成中间代码形式，可以在分析语法时同时结合语义分析(称为语法制导翻译 Syntax Directed Translation)这样语法、语义、中间代码三个就放在一起，

## 词法分析概述
1. 主要任务：从左向右逐行扫描源程序的字符，识别出各个单词，确定**单词的类型**。将识别出的单词转换成统一的**机内表示**--词法单元(token)形式
    * token:<种别码，属性值>
    种别码大体分类：
    ||单词类型|种别|种别码|
    |-|-|-|-|
    |1|关键字|||
    |2|识别码|||
    |3|常量|||
    |4|运算符|||
    |5|界限符|||

## 语法分析概述
1. 主要任务：从词法分析器输出的token序列中**识别出各类短语**，并**构造语法分析树(parse tree)**,语法分析树描述了句子的语法结构

## 语义分析概述
1. 主要任务：收集标识符的属性信息
    1. 属性的种类：
        * 种属 kind
        * 类型 type
        * 存储位置、长度
        * 值
        * 作用域
        * 参数和返回信息(函数)
    2. 语义分析收集到的标识符属性信息都会放到符号表中，符号表是用于存放标识符的属性信息的数据结构。
2. 另一任务：语义检查
    * 变量或过程**未经声明就使用**
    * 变量或过程名**重复声明** 
    * **运算分量**类型不匹配
    * **操作符**与**操作数**之间的类型不匹配
        * **数组下标**不是整数
        * 对**非数组变量**使用数组访问操作符
        * 对**非过程名**使用过程调用操作符
        * 过程调用的**参数类型或者数目**不匹配
        * 函数返回有错误

## 中间代码生成及编译
### 常用的中间表示形式
1. 三地址码(Three-address Code)
    1. 三地址码由**类似于汇编语言**的指令序列组成，每个指令**最多有三个操作数**
    2. 常用三地址指令    x[i] i表示地址不是下标
    |序号|指令类型|指令形式|
    |-|-|-|
    ||||
    3. 表示形式：四元式、三元式、
2. 语法结构书/语法树(Syntax Tree)

## 目标代码生成
目标代码生成以源程序的**中间表示形式**作为输入，并把它映射到**目标语言**
1. 主要任务：是为程序中使用的变量**合理分配寄存器**

## 代码优化
1. 主要任务：为改进代码所进行的**等价程序变换**，使其**运行得更快**一些、**占用空间更少**一些或者两者兼顾
    * 机器无关代码优化器：对中间表示形式进行优化
    * 机器相关代码优化器：对目标机器语言进行优化